(function(s,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],l):(s=typeof globalThis<"u"?globalThis:s||self,l(s["ui-dropdown-cdl"]={},s.vuex,s.Vue))})(this,function(s,l,a){"use strict";const r=(e,t)=>{const o=e.__vccOpts||e;for(const[i,p]of t)o[i]=p;return o},d={name:"UIDropdownCDL",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){},data(){return{value:"",fromManual:!1}},computed:{...l.mapState("data",["messages"]),color:function(){let e="";return this.fromManual&&(e=this.props.waitingcolor??""),e},options:function(){return this.props.options.map(e=>e.label)}},mounted(){this.$socket.on("widget-load:"+this.id,e=>{this.processMsg(e)}),this.$socket.on("msg-input:"+this.id,e=>{this.processMsg(e)}),this.pickupProperties(),this.$socket.emit("widget-load",this.id)},unmounted(){var e,t;(e=this.$socket)==null||e.off("widget-load:"+this.id),(t=this.$socket)==null||t.off("msg-input:"+this.id)},methods:{pickupProperties:function(){const e=this.props;this.topic=e.topic,e.options.forEach(t=>t.label=t.label.length>0?t.label:t.value)},processMsg:function(e){var t;if(typeof e.ui_update=="object"&&!Array.isArray(e.ui_update)&&e.ui_update!==null){const o=["options","class"];for(const[i,p]of Object.entries(e.ui_update))o.includes(i)&&(this.props[i]=p)}if("class"in e&&(this.props.class=e.class),"enabled"in e&&(this.props.enabled=e.enabled),"topic"in e&&(this.props.topicUpdated=e.topic),typeof e.payload=="string"&&this.props.options.find(o=>o.value===e.payload)){this.fromManual=!1;const o=(t=this.props.options.find(i=>i.value===e.payload))==null?void 0:t.label;o!==this.value&&(this.value=o,this.valueFromMsg=!0)}}},watch:{value:function(){var e;if(this.valueFromMsg)this.valueFromMsg=!1;else{this.fromManual=!0;let t={};t.payload=(e=this.props.options.find(o=>o.label===this.value))==null?void 0:e.value,this.props.topic&&this.props.topic.length>0?t.topic=this.topic:t.topic=this.props.topicUpdated,this.$socket.emit("widget-action",this.id,t)}}}};function c(e,t,o,i,p,n){const f=a.resolveComponent("v-select");return a.openBlock(),a.createElementBlock("div",{className:"ui-dropdown-cdl-wrapper",class:a.normalizeClass(o.props.class)},[a.createVNode(f,{label:o.props.label,variant:"outlined",modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=h=>p.value=h),"hide-details":"",items:n.options,"bg-color":n.color,disabled:!o.props.enabled},null,8,["label","modelValue","items","bg-color","disabled"])],2)}const u=r(d,[["render",c],["__scopeId","data-v-bf8800d5"]]);s.UIDropdownCDL=u,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
