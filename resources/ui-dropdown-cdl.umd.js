(function(i,o){typeof exports=="object"&&typeof module<"u"?o(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],o):(i=typeof globalThis<"u"?globalThis:i||self,o(i["ui-dropdown-cdl"]={},i.Vue))})(this,function(i,o){"use strict";const a=(e,t)=>{const s=e.__vccOpts||e;for(const[l,p]of t)s[l]=p;return s},r={name:"UIDropdownCDL",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){},data(){return{value:"",fromManual:!1}},mounted(){this.$socket.on("widget-load:"+this.id,e=>{e&&this.processMsg(e)}),this.$socket.on("msg-input:"+this.id,e=>{this.processMsg(e)}),this.$socket.on("widget-updates:"+this.id,e=>{this.processUpdates(e._updates)}),this.pickupProperties(),this.$socket.emit("widget-load",this.id)},unmounted(){var e,t,s;(e=this.$socket)==null||e.off("widget-load:"+this.id),(t=this.$socket)==null||t.off("msg-input:"+this.id),(s=this.$socket)==null||s.off("widget-updates:"+this.id)},computed:{color:function(){let e="";return this.fromManual&&(e=this.props.waitingcolor??""),e},options:function(){return this.props.options.map(e=>e.label)}},methods:{pickupProperties:function(){const e=this.props;this.topic=e.topic,e.options.forEach(t=>t.label=t.label.length>0?t.label:t.value)},processMsg:function(e){var t;if(typeof e.payload=="string"&&this.props.options.find(s=>s.value===e.payload)){this.fromManual=!1;const s=(t=this.props.options.find(l=>l.value===e.payload))==null?void 0:t.label;s!==this.value&&(this.value=s,this.valueFromMsg=!0)}},processUpdates:function(e){for(const[t,s]of Object.entries(e))this.props[t]=s}},watch:{value:function(){var e;if(this.valueFromMsg)this.valueFromMsg=!1;else{this.fromManual=!0;let t={};t.payload=(e=this.props.options.find(s=>s.label===this.value))==null?void 0:e.value,this.props.topic&&this.props.topic.length>0?t.topic=this.topic:t.topic=this.props.topicUpdated,this.$socket.emit("widget-action",this.id,t)}}}};function d(e,t,s,l,p,n){const u=o.resolveComponent("v-select");return o.openBlock(),o.createElementBlock("div",{className:"ui-dropdown-cdl-wrapper",class:o.normalizeClass(s.props.class)},[o.createVNode(u,{label:s.props.label,variant:"outlined",modelValue:p.value,"onUpdate:modelValue":t[0]||(t[0]=f=>p.value=f),"hide-details":"",items:n.options,"bg-color":n.color,disabled:!s.props.enabled},null,8,["label","modelValue","items","bg-color","disabled"])],2)}const c=a(r,[["render",d],["__scopeId","data-v-23e7730a"]]);i.UIDropdownCDL=c,Object.defineProperty(i,Symbol.toStringTag,{value:"Module"})});
