(function(o,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],l):(o=typeof globalThis<"u"?globalThis:o||self,l(o["ui-dropdown-cdl"]={},o.vuex,o.Vue))})(this,function(o,l,a){"use strict";const d=(e,t)=>{const s=e.__vccOpts||e;for(const[n,i]of t)s[n]=i;return s},r={name:"UIDropdownCDL",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){},data(){return{value:"",disabled:!1,fromManual:!1,topic:null,class:""}},computed:{...l.mapState("data",["messages"]),color:function(){let e="";return this.fromManual&&(e=this.props.waitingcolor??""),e}},mounted(){this.$socket.on("widget-load:"+this.id,e=>{this.processMsg(e)}),this.$socket.on("msg-input:"+this.id,e=>{this.processMsg(e)}),this.pickupProperties(),this.$socket.emit("widget-load",this.id)},unmounted(){var e,t;(e=this.$socket)==null||e.off("widget-load:"+this.id),(t=this.$socket)==null||t.off("msg-input:"+this.id)},methods:{pickupProperties:function(){const e=this.props;this.topic=e.topic,e.options.forEach(t=>t.label=t.label.length>0?t.label:t.value)},processMsg:function(e){var t;if(e.payload){this.fromManual=!1;const s=(t=this.props.options.find(n=>n.value===e.payload))==null?void 0:t.label;s!==this.value&&(this.value=s,this.valueFromMsg=!0),(!this.props.topic||this.props.topic.length===0)&&(this.topic=e.topic)}"enabled"in e&&(this.disabled=!e.enabled)}},watch:{value:function(){var e;if(this.valueFromMsg)this.valueFromMsg=!1;else{this.fromManual=!0;let t={};t.payload=(e=this.props.options.find(s=>s.label===this.value))==null?void 0:e.value,t.topic=this.topic,this.$socket.emit("widget-action",this.id,t)}}}};function c(e,t,s,n,i,f){const h=a.resolveComponent("v-select");return a.openBlock(),a.createElementBlock("div",{className:"ui-dropdown-cdl-wrapper",class:a.normalizeClass(i.class)},[a.createVNode(h,{label:s.props.label,variant:"outlined",modelValue:i.value,"onUpdate:modelValue":t[0]||(t[0]=p=>i.value=p),"hide-details":"",items:s.props.options.map(p=>p.label),"bg-color":f.color,disabled:i.disabled},null,8,["label","modelValue","items","bg-color","disabled"])],2)}const u=d(r,[["render",c],["__scopeId","data-v-3dd23443"]]);o.UIDropdownCDL=u,Object.defineProperty(o,Symbol.toStringTag,{value:"Module"})});
