(function(t,i){typeof exports=="object"&&typeof module<"u"?i(exports,require("vuex"),require("vue")):typeof define=="function"&&define.amd?define(["exports","vuex","vue"],i):(t=typeof globalThis<"u"?globalThis:t||self,i(t["ui-dropdown-cdl"]={},t.vuex,t.Vue))})(this,function(t,i,l){"use strict";const p=(e,o)=>{const n=e.__vccOpts||e;for(const[a,s]of o)n[a]=s;return n},d={name:"UIDropdownCDL",inject:["$socket"],props:{id:{type:String,required:!0},props:{type:Object,default:()=>({})},state:{type:Object,default:()=>({enabled:!1,visible:!1})}},setup(e){},data(){return{value:"",disabled:!1,fromManual:!1,topic:null,class:""}},computed:{...i.mapState("data",["messages"]),color:function(){let e="";return this.fromManual&&(e=this.props.waitingcolor??""),e}},mounted(){this.$socket.on("widget-load:"+this.id,e=>{this.processMsg(e)}),this.$socket.on("msg-input:"+this.id,e=>{this.processMsg(e)}),this.pickupProperties(),this.$socket.emit("widget-load",this.id)},unmounted(){var e,o;(e=this.$socket)==null||e.off("widget-load:"+this.id),(o=this.$socket)==null||o.off("msg-input:"+this.id)},methods:{pickupProperties:function(){const e=this.props;this.topic=e.topic},processMsg:function(e){e.payload&&(this.fromManual=!1,e.payload!==this.value&&(this.value=e.payload,this.valueFromMsg=!0),(!this.props.topic||this.props.topic.length===0)&&(this.topic=e.topic)),"enabled"in e&&(this.disabled=!e.enabled)}},watch:{value:function(){if(this.valueFromMsg)this.valueFromMsg=!1;else{this.fromManual=!0;let e={};e.payload=this.value,e.topic=this.topic,this.$socket.emit("widget-action",this.id,e)}}}};function r(e,o,n,a,s,u){const f=l.resolveComponent("v-select");return l.openBlock(),l.createElementBlock("div",{className:"ui-dropdown-cdl-wrapper",class:l.normalizeClass(s.class)},[l.createVNode(f,{label:n.props.label,variant:"outlined",modelValue:s.value,"onUpdate:modelValue":o[0]||(o[0]=h=>s.value=h),"hide-details":"",items:n.props.options,"bg-color":u.color,disabled:s.disabled},null,8,["label","modelValue","items","bg-color","disabled"])],2)}const c=p(d,[["render",r],["__scopeId","data-v-b45c1577"]]);t.UIDropdownCDL=c,Object.defineProperty(t,Symbol.toStringTag,{value:"Module"})});
